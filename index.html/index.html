<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AGOT - Comunidad de Salud Mental</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>
    <style>
        body { font-family: 'Montserrat', sans-serif; margin: 0; padding: 0; background-color: #2c2c2c; color: #ccc; }
        header { background: #0d0d0d; color: white; padding: 40px; text-align: center; font-size: 36px; font-weight: bold; letter-spacing: 2px; }
        nav { background: #333; padding: 15px; text-align: center; position: sticky; top: 0; z-index: 1000; }
        nav a { color: #ccc; text-decoration: none; margin: 15px; font-weight: bold; padding: 10px; transition: 0.3s; cursor: pointer; }
        nav a:hover { background: #444; border-radius: 5px; }
        .container { max-width: 900px; margin: 20px auto; padding: 20px; }
        section { padding: 20px; display: none; background: #1a1a1a; border-radius: 10px; box-shadow: 0 4px 8px rgba(255, 255, 255, 0.1); color: #ccc; }
        .auth-btn { padding: 10px; background: #444; color: white; border: none; cursor: pointer; }
        .chat-box { border: 2px solid #444; padding: 15px; height: 300px; overflow-y: auto; background: #222; border-radius: 10px; color: #ccc; }
        .message-input { width: calc(100% - 90px); padding: 10px; margin-top: 10px; background: #333; color: white; border: 1px solid #555; }
        .send-btn { padding: 10px; background: #444; color: white; border: none; cursor: pointer; }
    </style>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDR5HD-NtN5a6XUAG3qBQZyR4pOCdUNx3o",
            authDomain: "agot-d7b7e.firebaseapp.com",
            projectId: "agot-d7b7e",
            storageBucket: "agot-d7b7e.appspot.com",
            messagingSenderId: "800481570212",
            appId: "1:800481570212:web:ec3907478bb2b2136de531",
            measurementId: "G-YXKP1X8RJ5"
        };
        
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        function googleLogin() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider).then(result => {
                localStorage.setItem("user", result.user.displayName);
                checkAuth();
            }).catch(error => {
                console.error(error);
            });
        }

        function logout() {
            auth.signOut().then(() => {
                localStorage.removeItem("user");
                checkAuth();
            });
        }

        function checkAuth() {
            let user = localStorage.getItem("user");
            if (user) {
                document.getElementById("auth-container").style.display = "none";
                document.getElementById("post-container").style.display = "block";
            } else {
                document.getElementById("auth-container").style.display = "block";
                document.getElementById("post-container").style.display = "none";
            }
        }

        function showSection(sectionId) {
            document.querySelectorAll("section").forEach(section => section.style.display = "none");
            document.getElementById(sectionId).style.display = "block";
        }

        function sendMessage() {
            let message = document.getElementById("messageInput").value;
            let user = localStorage.getItem("user");
            if (message.trim() !== "" && user) {
                db.ref("messages").push({ user: user, text: message });
                document.getElementById("messageInput").value = "";
            }
        }

        function loadMessages() {
            db.ref("messages").on("child_added", snapshot => {
                let message = snapshot.val();
                let messageElement = document.createElement("p");
                messageElement.innerHTML = `<strong>${message.user}:</strong> ${message.text}`;
                document.getElementById("chatBox").appendChild(messageElement);
            });
        }

        window.onload = function() { checkAuth(); showSection('sobre-mi'); loadMessages(); };
    </script>
</head>
<body>
    <header>Bienvenido a AGOT - Comunidad de Salud Mental</header>
    <nav>
        <a onclick="showSection('sobre-mi')">Sobre Mí</a>
        <a onclick="showSection('blog')">Blog</a>
        <a onclick="showSection('comunidad')">Comunidad</a>
        <a onclick="showSection('chat')">Chat de Apoyo</a>
    </nav>
    <div class="container">
        <section id="sobre-mi">
            <h2>Sobre Mí</h2>
            <p>Aquí puedes leer sobre mi experiencia y mi historia.</p>
        </section>
        <section id="blog">
            <h2>Blog</h2>
            <p>Aquí encontrarás artículos sobre salud mental y bienestar.</p>
        </section>
        <section id="comunidad">
            <h2>Comunidad</h2>
            <p>Únete a la comunidad para compartir experiencias y apoyarnos mutuamente.</p>
            <div id="auth-container" class="auth-container">
                <button onclick="googleLogin()" class="auth-btn">Iniciar sesión con Google</button>
            </div>
            <div id="post-container" class="post-container" style="display:none;">
                <button onclick="logout()" class="auth-btn">Cerrar sesión</button>
            </div>
        </section>
        <section id="chat">
            <h2>Chat de Apoyo</h2>
            <div class="chat-box" id="chatBox"></div>
            <input type="text" id="messageInput" class="message-input" placeholder="Escribe un mensaje...">
            <button onclick="sendMessage()" class="send-btn">Enviar</button>
        </section>
    </div>
</body>
</html>


